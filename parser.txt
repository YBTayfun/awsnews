import feedparser
import json
import os

def parse_rss_to_json(rss_url, output_file):
    feed = feedparser.parse(rss_url)

    if os.path.exists(output_file):
        with open(output_file, 'r', encoding='utf-8') as f:
            existing_items = json.load(f)
        existing_guids = {item['guid'] for item in existing_items}
    else:
        existing_items = []
        existing_guids = set()

    for post in feed.entries:
        guid = getattr(post, 'id', 'No GUID')
        if guid not in existing_guids:
            item = {
                'guid': guid,
                'title': getattr(post, 'title', 'No Title'),
                'link': getattr(post, 'link', 'No Link'),
                'date': getattr(post, 'published', 'No Date'),
                'description': getattr(post, 'description', 'No Description')
            }
            existing_items.append(item)

    with open(output_file, 'w', encoding='utf-8') as f:
        json.dump(existing_items, f, ensure_ascii=False, indent=4)

        
rss_url = 'YOUR_RSS_FEED_URL'  
output_file = 'feed_data.json'
parse_rss_to_json(rss_url, output_file)